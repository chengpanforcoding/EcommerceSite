@{
    ViewData["Title"] = ViewBag.message ;
}

<link rel="stylesheet" href="/css/product.css" type="text/css">
<style>
    .carousel-inner {
        overflow: visible;
    }
</style>
<section id="productVue">

    <!--商品輪播區塊-->
    <div class="container mt-3">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <!----goiyugiausgdyoaiuh piu-->

                @*<template v-for="(img,num) in pic">*@

                    <button type="button" v-for="(img,num) in pic" data-bs-target="#carouselExampleIndicators" :data-bs-slide-to="num"  v-bind:class ="{'active' :num ===0 }"
                            aria-current="true" v-bind:aria-label=" 'Slide'+ num" @*v-if="num == 0"*@></button>


                    @*<button type="button" data-bs-target="#carouselExampleIndicators" v-bind:data-bs-slide-to="num"
                            v-bind:aria-label=" 'Slide'+ num" v-else></button>

                </template>*@
                
            
                @*<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
        aria-label="Slide 3"></button>*@

            </div>
            <div class="carousel-inner">
                @*<template v-for="(img,num) in pic">*@

                    <div class="carousel-item" v-bind:class ="{'active' :num ===0 }" @*v-if="num>=1"*@v-for="(img,num) in pic">
                        <img v-bind:src="img.url" class="d-block w-100" alt="...">
                    </div>
                    <!--<div class="carousel-item active" v-else>
                        <img v-bind:src="img.url" class="d-block w-100" alt="...">-->
                        @*<img v-bind:src="img.url" class="d-block w-100" alt="...">*@
                    <!--</div>-->
                @*</template>*@
                @*<div class="carousel-item">
                <img src="https://picsum.photos/750/350?random=7" class="d-block w-100" alt="...">
                </div>*@
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                    data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                    data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <!--麵包屑-->
    <div class="container">
        <div class="breadcrumb mt-3">
            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="">台灣</a></li>
                    <li class="breadcrumb-item"><a href="">{{chregion}}</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{product.title}}</li>
                </ol>
            </nav>
        </div>
    </div>
    <!--商品簡述區塊-->
    <div class="container">
        <div class="row">
            <!--商品本體-->
            <div class="col-12 col-md-8">
                <div class="item">
                    <!--商品標題-->
                    <h2 id="product">
                        {{product.title}}
                    </h2>
                    <!--評價&購買&收藏-->
                    <div class="product-layout-list mt-3">
                        <div class="d-flex justify-content-between">
                            <div class="product-related d-flex gap-3 ">
                                <!--評價-->
                                <div class="product-star d-flex">
                                    <span class="text-warning">
                                        <i class="bi bi-star-fill"></i>
                                    </span>
                                    <p><small class="text-muted">{{customerRating}}</small></p>
                                </div>
                                <span class="divider">|</span>
                                <!--熱門程度-->
                                <div class="prodcut-book d-flex">
                                    <p><small class="text-muted">xxxx人已參加過</small></p>
                                </div>
                            </div>

                            <!--收藏-->
                            <div class="favorite ">
                                <div class="d-inline-flex gap-1">
                                    <div class="text-danger">
                                        <a href="javascript:void(0);" class="text-danger">
                                            <i class="bi bi-heart"></i>
                                        </a>
                                    </div>
                                    <p><small class="text-muted">加入我的最愛</small></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--商品敘述-->
                    <div class="product-content">
                        <p class="lh-base">
                            {{product.description}}
                        </p>
                    </div>

                    <!--最新評價-->
                    <div class="last-review mt-5 " id="lastReview">
                        <div class="d-flex justify-content-between mb-3">
                            <h4>▎最新評價</h4>
                            <a href="javascript:void(0);">更多評價></a>
                        </div>
                        <div class="container">
                            <div class="row">
                                <!--客人圖-->
                                <div class="col-3">
                                    <div class="guest align-middle">
                                        <div>
                                            <img src="https://fakeimg.pl/100/" class="rounded-circle img-fluid">
                                        </div>
                                        <div>
                                            <span class="text-center">memberName</span>
                                        </div>
                                    </div>
                                </div>
                                <!--客人評價區塊-->
                                <div class="col-9">
                                    <div class="review-item">
                                        <div class="d-flex gap-3 mb-4">
                                            <!--這邊放星星-->
                                            <div class="product-star">
                                                <span class="text-warning">
                                                    <i class="bi bi-star-fill"></i>
                                                </span>
                                                <span class="text-warning">
                                                    <i class="bi bi-star-fill"></i>
                                                </span>
                                                <span class="text-warning">
                                                    <i class="bi bi-star-fill"></i>
                                                </span>
                                                <span class="text-warning">
                                                    <i class="bi bi-star-fill"></i>
                                                </span>
                                                <span class="text-warning">
                                                    <i class="bi bi-star-fill"></i>
                                                </span>
                                            </div>
                                            <div class="review-title">這邊放商品評價標題</div>
                                        </div>
                                        <p>好棒的旅遊體驗。這邊打一些假的評價內容哈哈哈</p>
                                        <div class="text-muted">
                                            <small>
                                                於 2022/03/29 評價
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--商品下訂-->
            <div class="col-12 col-md-4">
                <div class="order-block my-3">
                    <div class="product-prcie d-flex gap-1 m-3">
                        <span class="fs-3 fw-bold">TWD {{product.price}}</span>
                        <span class="text-muted origin-price text-decoration-line-through">TWD {{cuntOringPrice}}</span>
                    </div>
                    <div class="callout m-3">
                        <span class="text-warning">
                            <i class="bi bi-lightning-charge-fill"></i>
                        </span>
                        <span class="text-muted">
                            <small>
                                現在預訂，今日使用
                            </small>
                        </span>
                    </div>



                    <div class="m-3">
                        <div class="d-grid gap-2">

                            <button class="btn btn-primary" type="button" v-on:click="purchaseNow">立即下訂</button>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!--方案選擇-->
    <div class="product-overview" id="productInfo">
        <div class="container-fluid">
            <div class="container">

                <div class="row mx-auto ">
                    <div class="d-flex justify-content-between mb-3">
                        <h4>▎方案選擇</h4>
                    </div>

                    <div class="row mx-auto option-item">

                        <a href="#" v-on:click.prevent="restcuntClick">
                            <div class="d-flex justify-content-end gap-1 mb-1">
                                <span class="fw-bold text-success"><i class="fas fa-redo"></i></span>
                                <div class="fw-bold text-success">全部重選</div>
                            </div>
                        </a>
                        <!--左側：日期選擇-->
                        <div class="col-6">
                            <p class="text-muted fw-bold mb-3">預計出發日期</p>
                            <div>{{product.goTouristTime}}</div>
                            @*<div class="text-info">這邊要放日曆</div>*@
                            @*<input type="datetime-local" id="meeting-time" name="meeting-time"
                                   value="2022-05-06T19:30" min="2018-06-07T00:00" max="2025-06-14T00:00">*@

                        </div>
                        <!--右側：商品數量&金額-->
                        <div class="col-6">
                            <p class="text-muted fw-bold mb-3">選擇數量</p>
                            <!--商品數量-->
                            <div class="item d-flex justify-content-between">
                                <div class="fw-bold">
                                    商品數量
                                </div>
                                <div class="text-muted">
                                    TWD {{product.price}}/每人
                                </div>
                                <!--商品數量選擇器-->
                                <div class="count-picker">
                                    <div class=" d-flex align-items-center  gap-3">
                                        <span class="text-info fw-bold fs-4" v-on:click="changeIndex(-1)"><i class="bi bi-dash-circle"></i></span>
                                        <span class="fs-4">{{index}}</span>
                                        <span class="text-info fw-bold fs-4" v-on:click="changeIndex(+1)"><i class="bi bi-plus-circle"></i></span>
                                    </div>
                                </div>
                            </div>
                            <hr class="text-muted">
                            <!--商品金額-->
                            <div class="d-flex justify-content-between">
                                <div class="text-muted">
                                    總金額
                                </div>
                                <div class="fw-bold text-info fs-5">
                                    TWD {{cuntprice}}
                                </div>
                            </div>
                            <!--點數-->
                            <div class="d-flex justify-content-between mb-5">
                                <div class="text-muted">
                                    TT Points
                                </div>
                                <div class="d-flex gap-2">
                                    <span class="text-warning"><i class="bi bi-exclamation-circle-fill"></i></span>
                                    <div class="fw-bold text-warning">
                                        {{cuntpoint}}
                                    </div>
                                </div>
                            </div>
                            <!--加入購物車or下訂-->
                            <div class="d-flex justify-content-end gap-3">
                                <button type="button" class="btn btn-primary" v-on:click="addcart">加入購物車</button>
                                <button type="button" class="btn btn-info" v-on:click="purchaseNow">立即訂購</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--評價區塊-->
    <div class="container mt-5" id="Review">
        <div class="row">
            <div class="col-9">
                <div class="container mx-1">
                    <!--評價標題-->
                    <div class="d-flex justify-content-between mb-2">
                        <h4>▎評價</h4>
                    </div>
                    <!--評價敘述-->
                    <div class="d-flex gap-3 mb-3">
                        <!--評價星數-->
                        <div class="d-flex gap-1">
                            <span class="fs-5 fw-bold">{{customerRating}}</span>
                            <span class="text-warning fs-5">
                                <i class="bi bi-star-fill"></i>
                            </span>
                            <span class="text-warning fs-5">
                                <i class="bi bi-star-fill"></i>
                            </span>
                            <span class="text-warning fs-5">
                                <i class="bi bi-star-fill"></i>
                            </span>
                            <span class="text-warning fs-5">
                                <i class="bi bi-star-fill"></i>
                            </span>
                            <span class="text-warning fs-5">
                                <i class="bi bi-star-fill"></i>
                            </span>
                        </div>
                        <!--評價則數-->
                        <div class="fs-5 text-muted">xxx則評價</div>
                    </div>
                    <!--評價排序-->
                    <div class="d-flex gap-3">
                        <!--星星排序-->
                        <div class="orderByStar">
                            <div class="dropdown">
                                <button class="btn  dropdown-toggle" type="button" id="dropdownMenuButton1"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                    評分
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                    <li>
                                        <a class="dropdown-item" href="javascript:void(0);">
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="javascript:void(0);">
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="javascript:void(0);">
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="javascript:void(0);">
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="javascript:void(0);">
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="orderByText d-flex gap-1 align-items-center">
                            <div>
                                <div class="text-muted">
                                    排序方式：
                                </div>
                            </div>
                            <div>
                                <div class="dropdown">
                                    <button class="btn dropdown-toggle" type="button" id="dropdownMenu2"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                        最高至最低分
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                        <li><button class="dropdown-item" type="button">最高至最低分</button></li>
                                        <li><button class="dropdown-item" type="button">最低至最高分</button></li>
                                        <li><button class="dropdown-item" type="button">最新日期</button></li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--評價呈列-->
                    <div class="container mt-5">
                        <div class="row">
                            <!--客人圖-->
                            <div class="col-3">
                                <div class="guest align-middle">
                                    <div>
                                        <img src="https://fakeimg.pl/100/" class="rounded-circle img-fluid">
                                    </div>
                                    <div>
                                        <span class="text-center">memberName</span>
                                    </div>
                                </div>
                            </div>
                            <!--客人評價區塊-->
                            <div class="col-9">
                                <div class="review-item">
                                    <div class="d-flex gap-3 mb-4">
                                        <!--這邊放星星-->
                                        <div class="product-star">
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                            <span class="text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </div>
                                        <div class="review-title">這邊放商品評價標題</div>
                                    </div>
                                    <p>好棒的旅遊體驗。這邊打一些假的評價內容哈哈哈</p>
                                    <div class="text-muted">
                                        <small>
                                            於 2022/03/29 評價
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <hr class="text-muted">
                        </div>
                    </div>

                    <!--評價分頁-->
                    <div class="m-5">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination d-flex justify-content-center">
                                <li class="page-item active"><a class="page-link" href="">1</a></li>
                                <li class="page-item"><a class="page-link" href="">2</a></li>
                                <li class="page-item"><a class="page-link" href="">3</a></li>
                                <li class="page-item"><a class="page-link" href="">4</a></li>
                                <li class="page-item"><a class="page-link" href="">5</a></li>
                                <li class="page-item"><a class="page-link" href="">6</a></li>
                                <li class="page-item"><a class="page-link" href="">></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="item">
                    <nav id="navbar-example3" class="navbar navbar-light bg-light flex-column align-items-stretch p-3">
                        <a class="navbar-brand mb-3" href="javascript:void(0);">快速目錄</a>
                        <nav class="nav nav-pills flex-column">
                            <a class="nav-link" href="#product">商品介紹</a>
                            <a class="nav-link" href="#lastReview">最新評價</a>
                            <a class="nav-link" href="#productInfo">方案選擇</a>
                            <a class="nav-link" href="#Review">旅客評價</a>
                        </nav>
                    </nav>
                </div>
            </div>
        </div>

    </div>
    
    <!--你可能也會喜歡-->
    <div class="container mb-5">
        <div class="d-flex justify-content-between mb-3">
            <h4>▎你可能也會喜歡</h4>
        </div>
        <div class="row">
            <!--商品單項 直接在最外層加a標籤-->
            <div class="col-6 col-md-3" v-for="item in productlist.slice(0,4)">
                <a class="text-secondary" v-bind:href=" '/ProductView/product/'+ item.id " target="_blank" rel="noopener">
                    <div class="mb-1">
                        <div class="card mb-1">
                            <div class="row g-0">
                                <div class="col-12 product-card-image" v-bind:style=" 'background-image: url( '+item.productPictures[0].url +');' ">
                                    <div class="mt-3 d-flex justify-content-between mx-3">
                                        <!--地點-->
                                        <div class="d-flex gap-1">
                                            <span class="text-light">
                                                <i class="bi bi-geo-alt-fill"></i>
                                            </span>
                                            <p><small class="text-light">地點</small></p>
                                        </div>
                                        <!--收藏愛心 這邊暫時不做a標籤 -->
                                        <div class="text-muted">
                                            <span class="text-danger"><i class="bi bi-heart"></i></span>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-12">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between">
                                            <h5 class="card-title mb-3">{{item.title |ellipsis}}</h5>
                                        </div>

                                        <!--產品資訊：評價&購買數量-->
                                        <div class="product-info d-flex gap-1">
                                            <!--評價-->
                                            <div class="product-star d-flex">
                                                <span class="text-warning"><i class="bi bi-star-fill"></i></span>
                                                <p><small class="text-muted">{{item.customerRating}}</small></p>
                                            </div>
                                            <span class="divider">|</span>
                                            <!--熱門程度-->
                                            <div class="prodcut-book d-flex gap-1">
                                                <span>
                                                    <i class="fas fa-fire text-danger"></i>
                                                </span>
                                                <p><small class="text-muted">xxxx個已訂購</small></p>
                                            </div>
                                        </div>
                                        <!--日期-->
                                        <div class="product-info d-flex gap-1">
                                            <span class="text-muted"><i class="bi bi-calendar"></i></span>
                                            <p><small class="text-muted">出發日期：{{item.goTouristTime}}</small></p>
                                        </div>
                                        <!--產品資訊：評價&熱門程度&價格-->
                                        <div class="product-footer d-flex gap-1 ">
                                            <!--價格-->
                                            <div class="product-price gap-3">
                                                <div>
                                                    <p class="fw-bolder">TWD    {{item.price}} </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            @*原始樣板**@
            <!--商品單項 直接在最外層加a標籤-->
            <!--<div class="col-6 col-md-3">
            <a class="text-secondary" href="#" target="_blank" rel="noopener">
                <div class="mb-1">
                    <div class="card mb-1">
                        <div class="row g-0">
                            <div class="col-12 product-card-image" style="background-image: url(https://picsum.photos/150/100);">
                                <div class="mt-3 d-flex justify-content-between mx-3">-->
            <!--地點-->
            <!--<div class="d-flex gap-1">
                <span class="text-light">
                    <i class="bi bi-geo-alt-fill"></i>
                </span>
                <p><small class="text-light">地點</small></p>
            </div>-->
            <!--收藏愛心 這邊暫時不做a標籤 -->
            <!--<div class="text-muted">
                        <span class="text-danger"><i class="bi bi-heart"></i></span>
                    </div>
                </div>

            </div>
            <div class="col-12">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <h5 class="card-title mb-3">商品標題</h5>
                    </div>-->
            <!--產品資訊：評價&購買數量-->
            <!--<div class="product-info d-flex gap-1">-->
            <!--評價-->
            <!--<div class="product-star d-flex">
                <span class="text-warning"><i class="bi bi-star-fill"></i></span>
                <p><small class="text-muted">(星星評價數)</small></p>
            </div>
            <span class="divider">|</span>-->
            <!--熱門程度-->
            <!--<div class="prodcut-book d-flex gap-1">
                    <span>
                        <i class="fas fa-fire text-danger"></i>
                    </span>
                    <p><small class="text-muted">xxxx個已訂購</small></p>
                </div>
            </div>-->
            <!--日期-->
            <!--<div class="product-info d-flex gap-1">
                <span class="text-muted"><i class="bi bi-calendar"></i></span>
                <p><small class="text-muted">最早可預訂日期：2022-05-06</small></p>
            </div>-->
            <!--產品資訊：評價&熱門程度&價格-->
            <!--<div class="product-footer d-flex gap-1 ">-->
            <!--價格-->
            <!--<div class="product-price gap-3">
                                                <div>
                                                    <p class="fw-bolder">TWD X,XXX </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>-->
            
        </div>
    </div>

    <!--置底購買導覽列-->
    <nav class="navbar fixed-bottom navbar-light bg-light border-top">
        <div class="container-fluid mt-3">
            <div class="container d-flex justify-content-between">
                <div class="price-preview mb-2" id="">
                    <div class="price-info">
                        <span class="fw-bold fs-5 text-info">
                            TWD {{cuntprice}}
                        </span>
                        <span class="text-muted text-decoration-line-through">
                            <small>
                                TWD {{cuntOringPrice}}
                            </small>
                        </span>
                    </div>
                    <div class="edit">
                        <span class="text-muted">
                            <small>
                                完成所有必填項目
                            </small>
                        </span>
                    </div>
                </div>
                <div class="callout " id="">
                    <!--加入購物車or下訂-->
                    <div class="d-flex justify-content-end gap-3">
                        <div>

                            <button type="button" class="btn btn-primary" v-on:click="addcart">加入購物車</button>

                        </div>
                        <div>

                            <button type="button" class="btn btn-info" v-on:click="purchaseNow">立即訂購</button>

                        </div>
                        <div class="align-middle">
                            <div>
                                <span class="gap-1">
                                    <a href="#productInfo">
                                        <i class="bi bi-pencil-square"></i>
                                        <span>
                                            編輯所選項目
                                        </span>
                                    </a>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </nav>

</section>



<script>
    var getUrlString = location.pathname; //抓網頁路徑部分(/ProductView/product/XXXXX)
    var pid = getUrlString.replace("/ProductView/product/", "");//字元處理 移除"/ProductView/product/" 字串

    var app242 = new Vue({
        el: '#productVue',
        data: {
            product: [],
            productlist: [],
            pic: [],
            index: 1,
            sectionObject: {
                "North": "北北基",
                "MiddleNorth": "桃竹苗",
                "Middle": "中彰投",
                "MiddleSouth": "雲嘉南",
                "South": "高屏",
                "East": "宜花東",
                "OutsideIsland": "宜花東"
            },
            chregion: "",
            customerRating:"",
            a: 1

        },
        computed: {

            totalPicBtn: () => {
                return this.pic.length / this.btn;
            }

        },
        mounted: function () {
            var self = this;
            axios.get("/api/products/" + pid).then(function (res) {
                self.product = res.data;
                self.customerRating =res.data.customerRating;
                self.pic = res.data.productPictures;
                //self.local = res.data.region;
                self.chregion = app242.sectionObject[res.data.region];

                axios.get("/api/products").then(function (res) {
                    for (let i of res.data) {
                        i.region = self.sectionObject[i.region];
                        //i.goTouristTime = "" + i.goTouristTime;
                    }
                    self.productlist = res.data;
                    //self.productTotal = res.data.length;
                    //    self.chRegion = app1.sectionObject[res.data.region];
                }).catch(function (error) {
                    self.error = error.data;
                    self.productList = "";
                    //self.productTotal = "0";
                })


            })
                .catch(function (err) {
                    if (err.status == 404) {
                        alertWrong(err.data);
                    }
                })
        },
        methods: {

            restcuntClick: function () {
                this.index = 1;
            },

            changeIndex(change) {
                let self = this;
                self.index += change;
                //控管範圍  TODO抓取資料庫數量
                if (self.index <= 0) {
                    self.index = 1;
                }
                if (self.index > 10) {
                    self.index = 10;
                }
            },

            addcart: function () {
                var self = this;
                axios.post("/api/Cart/addcart", {
                    productId: pid,
                    quantity: self.index
                }).then(function (res) {
                    if (res.status == 200) {
                        cartListVue.getCurrentUserCart();
                        alertSuccess("加入購物車成功");
                    }
                }).catch(function (err) {
                    console.log(err.data);
                });
            },

            purchaseNow: function () {
                var userExist = localStorage.getItem('userExist');
                if (userExist == null) {
                    alertWrong("您似乎尚未登入");
                    var myLogin1 = document.getElementsByName("mylogin");
                    myLogin1[0].click();
                } else {
                    var directPurchase = '/Purchase/BookingNow?productId=' + pid + '&quantity=' + this.index;
                    window.location.href = directPurchase;
                }

               //var directPurchase = '/Purchase/BookingNow?productId=' + pid + '&quantity=' + this.index;
               //window.location.href = directPurchase;
            }
        },
        //buy: function () {
        //    //axios.post("/api/Cart/addcart", {  //大概改這裡就好吧
        //    //    productId: pid,
        //    //    quantity: self.index
        //    //}).then(function (res) {
        //    //    if (res.status == 200) {
        //    //        cartListVue.getCurrentUserCart();
        //    //        alert("加入購物車成功");
        //    //    }
        //    //}).catch(function (err) {
        //    //    console.log(err.data);
        //    //});
        //}
        //},

        filters: {
            ellipsis(value) {
                if (!value) return '';
                if (value.length > 20) {
                    return value.slice(0, 20) + '...'//第幾個字加...
                }
                return value
            }
        },

        computed: {
            cuntprice: function () {
                return this.product.price * this.index
            }, cuntpoint: function () {
                return Math.floor(this.cuntprice * 0.1)
            }, cuntOringPrice: function () {
                return this.product.originalPrice * this.index
            }

        }
    });
</script>
<script>
    //var directPurchase = '/Purchase/BookingNow?productId=' + '2' + '&quantity=' + 10;
    //function jump() {
    //    window.location.href = directPurchase;
    //}
</script>


@*<script>
    var vm=new Vue({
    el:'#CountPicker',
    data:{
    index:0,
    },
    methods:{
    changeIndex(change){

    this.index+=change;
    //控管範圍  TODO抓取資料庫數量
    if(this.index<0){
    this.index=0;
    }

    }
    }

    })
    </script>*@
